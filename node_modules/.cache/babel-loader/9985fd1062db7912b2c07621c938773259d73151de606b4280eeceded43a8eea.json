{"ast":null,"code":"import{stopSubmit}from'redux-form';import{profileAPI}from'../api/api';import avImgOne from'../assets/img/avatar_1.png';import avImgTwo from'../assets/img/avatar_5.jpg';import avImgThree from'../assets/img/avatar_3.jpg';const ADD_POST='ADD-POST';const SET_USER_PROFILE='SET_USER_PROFILE';const SET_STATUS='SET_STATUS';const SAVE_PHOTO_SUCCESS='SAVE_PHOTO_SUCCESS';let initialState={postsDt:[{id:1,image:avImgOne,message:'Hi, how are u?',likes:12},{id:2,image:avImgTwo,message:'Hi, everybody!',likes:36},{id:3,image:avImgThree,message:'OK. And u?',likes:26}],userProfile:null,status:''};const profileReducer=function(){let state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;let action=arguments.length>1?arguments[1]:undefined;switch(action.type){case ADD_POST:/*return {\r\n                ...state,\r\n                postsDt: [...state.postsDt, {\r\n                    id: state.postsDt.length + 1,\r\n                    message: action.newPost,\r\n                    likes: 0\r\n                }]\r\n            };*/let newPost={id:state.postsDt.length+1,message:action.newPostText,likes:0};return{...state,postsDt:[...state.postsDt,newPost],newPostText:''};case SET_USER_PROFILE:return{...state,userProfile:action.userProfile};case SET_STATUS:return{...state,status:action.status};case SAVE_PHOTO_SUCCESS:return{...state,profile:{...state.profile,photos:action.photos}};default:return state;};};//dispatch\n//export const addPostActionCreator = (newPost) => ({type: ADD_POST, newPost});\nexport const addPostActionCreator=text=>({type:ADD_POST,newPostText:text});export const setUserProfile=userProfile=>({type:SET_USER_PROFILE,userProfile});export const setStatus=status=>({type:SET_STATUS,status});export const savePhotoSuccess=photos=>({type:SAVE_PHOTO_SUCCESS,photos});//thunk\nexport const getUserProfile=userId=>async dispatch=>{let response=await profileAPI.getProfile(userId);dispatch(setUserProfile(response.data));};export const getUserStatus=userId=>async dispatch=>{let response=await profileAPI.getStatus(userId);dispatch(setStatus(response.data));};export const updateUserStatus=status=>async dispatch=>{let response=await profileAPI.updateStatus(status);if(response.data.resultCode===0){dispatch(setStatus(status));}};export const savePhoto=file=>async dispatch=>{let response=await profileAPI.savePhoto(file);if(response.data.resultCode===0){dispatch(savePhotoSuccess(response.data.data.photos));}};export const saveProfile=profile=>async(dispatch,getState)=>{const userId=getState().auth.userId;const response=await profileAPI.saveProfile(profile);if(response.data.resultCode===0){dispatch(getUserProfile(userId));}else{dispatch(stopSubmit('editProfile',{_error:response.data.messages[0]}));return Promise.reject(response.data.messages[0]);}};export default profileReducer;","map":{"version":3,"names":["stopSubmit","profileAPI","avImgOne","avImgTwo","avImgThree","ADD_POST","SET_USER_PROFILE","SET_STATUS","SAVE_PHOTO_SUCCESS","initialState","postsDt","id","image","message","likes","userProfile","status","profileReducer","state","arguments","length","undefined","action","type","newPost","newPostText","profile","photos","addPostActionCreator","text","setUserProfile","setStatus","savePhotoSuccess","getUserProfile","userId","dispatch","response","getProfile","data","getUserStatus","getStatus","updateUserStatus","updateStatus","resultCode","savePhoto","file","saveProfile","getState","auth","_error","messages","Promise","reject"],"sources":["C:/Work/React/studying/my-app/src/redux/profileReducer.js"],"sourcesContent":["import { stopSubmit } from 'redux-form';\r\nimport { profileAPI } from '../api/api';\r\nimport avImgOne from '../assets/img/avatar_1.png';\r\nimport avImgTwo from '../assets/img/avatar_5.jpg';\r\nimport avImgThree from '../assets/img/avatar_3.jpg';\r\n\r\nconst ADD_POST = 'ADD-POST';\r\nconst SET_USER_PROFILE = 'SET_USER_PROFILE';\r\nconst SET_STATUS = 'SET_STATUS';\r\nconst SAVE_PHOTO_SUCCESS = 'SAVE_PHOTO_SUCCESS';\r\n\r\nlet initialState = {\r\n    postsDt: [\r\n        {\r\n            id: 1,\r\n            image: avImgOne,\r\n            message: 'Hi, how are u?',\r\n            likes: 12\r\n        },\r\n        {\r\n            id: 2,\r\n            image: avImgTwo,\r\n            message: 'Hi, everybody!',\r\n            likes: 36\r\n        },\r\n        {\r\n            id: 3,\r\n            image: avImgThree,\r\n            message: 'OK. And u?',\r\n            likes: 26\r\n        }\r\n    ],\r\n    userProfile: null,\r\n    status: ''\r\n};\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n    switch(action.type) {\r\n        case ADD_POST:\r\n            /*return {\r\n                ...state,\r\n                postsDt: [...state.postsDt, {\r\n                    id: state.postsDt.length + 1,\r\n                    message: action.newPost,\r\n                    likes: 0\r\n                }]\r\n            };*/\r\n            let newPost = {\r\n                id: state.postsDt.length + 1,\r\n                message: action.newPostText,\r\n                likes: 0\r\n            }\r\n            return {\r\n                ...state,\r\n                postsDt: [...state.postsDt, newPost],\r\n                newPostText: ''\r\n            };\r\n        case SET_USER_PROFILE:\r\n            return {\r\n                ...state,\r\n                userProfile: action.userProfile\r\n            };\r\n        case SET_STATUS:\r\n            return {\r\n                ...state,\r\n                status: action.status\r\n            };\r\n        case SAVE_PHOTO_SUCCESS:\r\n            return {\r\n                ...state,\r\n                profile: {\r\n                    ...state.profile, \r\n                    photos: action.photos\r\n                }\r\n            }\r\n        default:\r\n            return state;\r\n    };\r\n};\r\n\r\n//dispatch\r\n//export const addPostActionCreator = (newPost) => ({type: ADD_POST, newPost});\r\nexport const addPostActionCreator = (text) => ({type: ADD_POST, newPostText: text});\r\nexport const setUserProfile = (userProfile) => ({type: SET_USER_PROFILE, userProfile});\r\nexport const setStatus = (status) => ({type: SET_STATUS, status});\r\nexport const savePhotoSuccess = (photos) => ({type: SAVE_PHOTO_SUCCESS, photos});\r\n\r\n//thunk\r\nexport const getUserProfile = (userId) => async (dispatch) => {\r\n    let response = await profileAPI.getProfile(userId);\r\n    dispatch(setUserProfile(response.data));\r\n}\r\n\r\nexport const getUserStatus = (userId) => async (dispatch) => {\r\n    let response = await profileAPI.getStatus(userId);\r\n    dispatch(setStatus(response.data));\r\n}\r\n\r\nexport const updateUserStatus = (status) => async (dispatch) => {\r\n    let response = await profileAPI.updateStatus(status);\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(setStatus(status));\r\n    }\r\n}\r\n\r\nexport const savePhoto = (file) => async (dispatch) => {\r\n    let response = await profileAPI.savePhoto(file);\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(savePhotoSuccess(response.data.data.photos));\r\n    }\r\n}\r\n\r\nexport const saveProfile = (profile) => async (dispatch, getState) => {\r\n    const userId = getState().auth.userId;\r\n    const response = await profileAPI.saveProfile(profile);\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(getUserProfile(userId));\r\n    } else {\r\n        dispatch(stopSubmit('editProfile', {\r\n            _error: response.data.messages[0]\r\n        }));\r\n        return Promise.reject(response.data.messages[0]);\r\n    }\r\n}\r\n\r\nexport default profileReducer;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}