{"ast":null,"code":"import React from'react';import{Navigate,useParams}from'react-router-dom';import{connect}from'react-redux';import{compose}from'redux';import Profile from'./Profile';import{getUserProfile,getUserStatus,updateUserStatus,savePhoto,saveProfile}from'../../redux/profileReducer';import{jsx as _jsx}from\"react/jsx-runtime\";export function withRouter(Children){return props=>{const match={params:useParams()};return/*#__PURE__*/_jsx(Children,{...props,match:match});};}class ProfileContainer extends React.Component{reloadProfile(){let userId=this.props.match.params.userId;if(!userId){userId=this.props.authorizedUserId;if(!userId)return/*#__PURE__*/_jsx(Navigate,{to:\"/auth\"});}this.props.getUserProfile(userId);this.props.getUserStatus(userId);}componentDidMount(){this.reloadProfile();}componentDidUpdate(prevProps,prevState,snapshot){if(this.props.match.params.userId!==prevProps.match.params.userId){this.reloadProfile();}}render(){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Profile,{...this.props,isOwner:!this.props.match.params.userId,userProfile:this.props.userProfile,status:this.props.status,updateStatus:this.props.updateUserStatus,savePhoto:this.props.savePhoto,saveProfile:this.props.saveProfile})});}}let mapStateToProps=state=>{return{userProfile:state.pageProfile.userProfile,status:state.pageProfile.status,authorizedUserId:state.auth.userId,isAuthorized:state.auth.isAuthorized};};export default compose(connect(mapStateToProps,{getUserProfile,getUserStatus,updateUserStatus,savePhoto,saveProfile}),withRouter)(ProfileContainer);","map":{"version":3,"names":["React","Navigate","useParams","connect","compose","Profile","getUserProfile","getUserStatus","updateUserStatus","savePhoto","saveProfile","jsx","_jsx","withRouter","Children","props","match","params","ProfileContainer","Component","reloadProfile","userId","authorizedUserId","to","componentDidMount","componentDidUpdate","prevProps","prevState","snapshot","render","children","isOwner","userProfile","status","updateStatus","mapStateToProps","state","pageProfile","auth","isAuthorized"],"sources":["C:/Work/React/studying/my-app/src/components/Profile/ProfileContainer.jsx"],"sourcesContent":["import React from 'react';\r\nimport { Navigate, useParams } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\nimport { compose } from 'redux';\r\nimport Profile from './Profile';\r\nimport { getUserProfile, getUserStatus, updateUserStatus, savePhoto, saveProfile } from '../../redux/profileReducer';\r\n\r\nexport function withRouter(Children) {\r\n    return(props) => {\r\n        const match = { params: useParams() };\r\n        return <Children {...props} match={match} />\r\n    }\r\n}\r\n\r\nclass ProfileContainer extends React.Component {\r\n    reloadProfile() {\r\n        let userId = this.props.match.params.userId;\r\n        if (!userId) {\r\n            userId = this.props.authorizedUserId;\r\n            if (!userId) return <Navigate to='/auth' />    \r\n        }\r\n        this.props.getUserProfile(userId);\r\n        this.props.getUserStatus(userId);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.reloadProfile();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if (this.props.match.params.userId !== prevProps.match.params.userId) {\r\n            this.reloadProfile();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Profile \r\n                    { ...this.props } \r\n                    isOwner={!this.props.match.params.userId}\r\n                    userProfile={this.props.userProfile} \r\n                    status={this.props.status} \r\n                    updateStatus={this.props.updateUserStatus}\r\n                    savePhoto={this.props.savePhoto}\r\n                    saveProfile={this.props.saveProfile} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nlet mapStateToProps = (state) => {\r\n    return {\r\n        userProfile: state.pageProfile.userProfile,\r\n        status: state.pageProfile.status,\r\n        authorizedUserId: state.auth.userId,\r\n        isAuthorized: state.auth.isAuthorized\r\n    }\r\n}\r\n\r\nexport default compose(\r\n    connect(mapStateToProps, { getUserProfile, getUserStatus, updateUserStatus, savePhoto, saveProfile }),\r\n    withRouter\r\n)(ProfileContainer);"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,QAAQ,CAAEC,SAAS,KAAQ,kBAAkB,CACtD,OAASC,OAAO,KAAQ,aAAa,CACrC,OAASC,OAAO,KAAQ,OAAO,CAC/B,MAAO,CAAAC,OAAO,KAAM,WAAW,CAC/B,OAASC,cAAc,CAAEC,aAAa,CAAEC,gBAAgB,CAAEC,SAAS,CAAEC,WAAW,KAAQ,4BAA4B,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAErH,MAAO,SAAS,CAAAC,UAAUA,CAACC,QAAQ,CAAE,CACjC,MAAO,CAAAC,KAAK,EAAK,CACb,KAAM,CAAAC,KAAK,CAAG,CAAEC,MAAM,CAAEf,SAAS,CAAC,CAAE,CAAC,CACrC,mBAAOU,IAAA,CAACE,QAAQ,KAAKC,KAAK,CAAEC,KAAK,CAAEA,KAAM,CAAE,CAAC,CAChD,CAAC,CACL,CAEA,KAAM,CAAAE,gBAAgB,QAAS,CAAAlB,KAAK,CAACmB,SAAU,CAC3CC,aAAaA,CAAA,CAAG,CACZ,GAAI,CAAAC,MAAM,CAAG,IAAI,CAACN,KAAK,CAACC,KAAK,CAACC,MAAM,CAACI,MAAM,CAC3C,GAAI,CAACA,MAAM,CAAE,CACTA,MAAM,CAAG,IAAI,CAACN,KAAK,CAACO,gBAAgB,CACpC,GAAI,CAACD,MAAM,CAAE,mBAAOT,IAAA,CAACX,QAAQ,EAACsB,EAAE,CAAC,OAAO,CAAE,CAAC,CAC/C,CACA,IAAI,CAACR,KAAK,CAACT,cAAc,CAACe,MAAM,CAAC,CACjC,IAAI,CAACN,KAAK,CAACR,aAAa,CAACc,MAAM,CAAC,CACpC,CAEAG,iBAAiBA,CAAA,CAAG,CAChB,IAAI,CAACJ,aAAa,CAAC,CAAC,CACxB,CAEAK,kBAAkBA,CAACC,SAAS,CAAEC,SAAS,CAAEC,QAAQ,CAAE,CAC/C,GAAI,IAAI,CAACb,KAAK,CAACC,KAAK,CAACC,MAAM,CAACI,MAAM,GAAKK,SAAS,CAACV,KAAK,CAACC,MAAM,CAACI,MAAM,CAAE,CAClE,IAAI,CAACD,aAAa,CAAC,CAAC,CACxB,CACJ,CAEAS,MAAMA,CAAA,CAAG,CACL,mBACIjB,IAAA,QAAAkB,QAAA,cACIlB,IAAA,CAACP,OAAO,KACC,IAAI,CAACU,KAAK,CACfgB,OAAO,CAAE,CAAC,IAAI,CAAChB,KAAK,CAACC,KAAK,CAACC,MAAM,CAACI,MAAO,CACzCW,WAAW,CAAE,IAAI,CAACjB,KAAK,CAACiB,WAAY,CACpCC,MAAM,CAAE,IAAI,CAAClB,KAAK,CAACkB,MAAO,CAC1BC,YAAY,CAAE,IAAI,CAACnB,KAAK,CAACP,gBAAiB,CAC1CC,SAAS,CAAE,IAAI,CAACM,KAAK,CAACN,SAAU,CAChCC,WAAW,CAAE,IAAI,CAACK,KAAK,CAACL,WAAY,CAAE,CAAC,CAC1C,CAAC,CAEd,CACJ,CAEA,GAAI,CAAAyB,eAAe,CAAIC,KAAK,EAAK,CAC7B,MAAO,CACHJ,WAAW,CAAEI,KAAK,CAACC,WAAW,CAACL,WAAW,CAC1CC,MAAM,CAAEG,KAAK,CAACC,WAAW,CAACJ,MAAM,CAChCX,gBAAgB,CAAEc,KAAK,CAACE,IAAI,CAACjB,MAAM,CACnCkB,YAAY,CAAEH,KAAK,CAACE,IAAI,CAACC,YAC7B,CAAC,CACL,CAAC,CAED,cAAe,CAAAnC,OAAO,CAClBD,OAAO,CAACgC,eAAe,CAAE,CAAE7B,cAAc,CAAEC,aAAa,CAAEC,gBAAgB,CAAEC,SAAS,CAAEC,WAAY,CAAC,CAAC,CACrGG,UACJ,CAAC,CAACK,gBAAgB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}