{"ast":null,"code":"import{stopSubmit}from'redux-form';import{authAPI}from'../api/api';const SET_AUTH_USER_DATA='SET_AUTH_USER_DATA';let initialState={userId:null,email:null,login:null,isAuthorized:false};const authReducer=function(){let state=arguments.length>0&&arguments[0]!==undefined?arguments[0]:initialState;let action=arguments.length>1?arguments[1]:undefined;switch(action.type){case SET_AUTH_USER_DATA:return{...state,...action.payload};default:return state;}};//dispatch\nexport const setAuthUserData=(userId,email,login,isAuthorized)=>({type:SET_AUTH_USER_DATA,payload:{userId,email,login,isAuthorized}});//thunk\nexport const getAuthUserData=()=>async dispatch=>{let response=await authAPI.auth();if(response.data.resultCode===0){let{id,login,email}=response.data.data;dispatch(setAuthUserData(id,login,email,true));}};export const Authorization=(email,password,rememberMe)=>async dispatch=>{let response=await authAPI.singIn(email,password,rememberMe);if(response.data.resultCode===0){dispatch(getAuthUserData());}else{let message=response.data.messages.length>0?response.data.messages[0]:'Error!';dispatch(stopSubmit('signIn',{_error:message}));}};export const logingOut=()=>async dispatch=>{let response=await authAPI.singOut();if(response.data.resultCode===0){dispatch(setAuthUserData(null,null,null,false));}};export default authReducer;","map":{"version":3,"names":["stopSubmit","authAPI","SET_AUTH_USER_DATA","initialState","userId","email","login","isAuthorized","authReducer","state","arguments","length","undefined","action","type","payload","setAuthUserData","getAuthUserData","dispatch","response","auth","data","resultCode","id","Authorization","password","rememberMe","singIn","message","messages","_error","logingOut","singOut"],"sources":["C:/Work/React/studying/my-app/src/redux/authReducer.js"],"sourcesContent":["import { stopSubmit } from 'redux-form';\r\nimport { authAPI } from '../api/api';\r\n\r\nconst SET_AUTH_USER_DATA = 'SET_AUTH_USER_DATA';\r\n\r\nlet initialState = {\r\n    userId: null,\r\n    email: null,\r\n    login: null,\r\n    isAuthorized: false\r\n};\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n    switch(action.type) {\r\n        case SET_AUTH_USER_DATA:\r\n            return {\r\n                ...state,\r\n                ...action.payload\r\n            }\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\n//dispatch\r\nexport const setAuthUserData = (userId, email, login, isAuthorized) => ({\r\n    type: SET_AUTH_USER_DATA, \r\n    payload: {userId, email, login, isAuthorized}\r\n});\r\n\r\n//thunk\r\nexport const getAuthUserData = () => async (dispatch) => {\r\n    let response = await authAPI.auth();\r\n    if (response.data.resultCode === 0) {\r\n        let {id, login, email} = response.data.data;\r\n        dispatch(setAuthUserData(id, login, email, true));\r\n    }\r\n}\r\n\r\nexport const Authorization = (email, password, rememberMe) => async (dispatch) => {\r\n    let response = await authAPI.singIn(email, password, rememberMe);\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(getAuthUserData());\r\n    } else {\r\n        let message = response.data.messages.length > 0 ? response.data.messages[0] : 'Error!';\r\n        dispatch(stopSubmit('signIn', {\r\n            _error: message\r\n        }));\r\n    }\r\n}\r\n\r\nexport const logingOut = () => async (dispatch) => {\r\n    let response = await authAPI.singOut();\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(setAuthUserData(null, null, null, false));\r\n    }\r\n}\r\n\r\nexport default authReducer;"],"mappings":"AAAA,OAASA,UAAU,KAAQ,YAAY,CACvC,OAASC,OAAO,KAAQ,YAAY,CAEpC,KAAM,CAAAC,kBAAkB,CAAG,oBAAoB,CAE/C,GAAI,CAAAC,YAAY,CAAG,CACfC,MAAM,CAAE,IAAI,CACZC,KAAK,CAAE,IAAI,CACXC,KAAK,CAAE,IAAI,CACXC,YAAY,CAAE,KAClB,CAAC,CAED,KAAM,CAAAC,WAAW,CAAG,QAAAA,CAAA,CAAkC,IAAjC,CAAAC,KAAK,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAGP,YAAY,IAAE,CAAAU,MAAM,CAAAH,SAAA,CAAAC,MAAA,GAAAD,SAAA,IAAAE,SAAA,CAC7C,OAAOC,MAAM,CAACC,IAAI,EACd,IAAK,CAAAZ,kBAAkB,CACnB,MAAO,CACH,GAAGO,KAAK,CACR,GAAGI,MAAM,CAACE,OACd,CAAC,CACL,QACI,MAAO,CAAAN,KAAK,CACpB,CACJ,CAAC,CAED;AACA,MAAO,MAAM,CAAAO,eAAe,CAAGA,CAACZ,MAAM,CAAEC,KAAK,CAAEC,KAAK,CAAEC,YAAY,IAAM,CACpEO,IAAI,CAAEZ,kBAAkB,CACxBa,OAAO,CAAE,CAACX,MAAM,CAAEC,KAAK,CAAEC,KAAK,CAAEC,YAAY,CAChD,CAAC,CAAC,CAEF;AACA,MAAO,MAAM,CAAAU,eAAe,CAAGA,CAAA,GAAM,KAAO,CAAAC,QAAQ,EAAK,CACrD,GAAI,CAAAC,QAAQ,CAAG,KAAM,CAAAlB,OAAO,CAACmB,IAAI,CAAC,CAAC,CACnC,GAAID,QAAQ,CAACE,IAAI,CAACC,UAAU,GAAK,CAAC,CAAE,CAChC,GAAI,CAACC,EAAE,CAAEjB,KAAK,CAAED,KAAK,CAAC,CAAGc,QAAQ,CAACE,IAAI,CAACA,IAAI,CAC3CH,QAAQ,CAACF,eAAe,CAACO,EAAE,CAAEjB,KAAK,CAAED,KAAK,CAAE,IAAI,CAAC,CAAC,CACrD,CACJ,CAAC,CAED,MAAO,MAAM,CAAAmB,aAAa,CAAGA,CAACnB,KAAK,CAAEoB,QAAQ,CAAEC,UAAU,GAAK,KAAO,CAAAR,QAAQ,EAAK,CAC9E,GAAI,CAAAC,QAAQ,CAAG,KAAM,CAAAlB,OAAO,CAAC0B,MAAM,CAACtB,KAAK,CAAEoB,QAAQ,CAAEC,UAAU,CAAC,CAChE,GAAIP,QAAQ,CAACE,IAAI,CAACC,UAAU,GAAK,CAAC,CAAE,CAChCJ,QAAQ,CAACD,eAAe,CAAC,CAAC,CAAC,CAC/B,CAAC,IAAM,CACH,GAAI,CAAAW,OAAO,CAAGT,QAAQ,CAACE,IAAI,CAACQ,QAAQ,CAAClB,MAAM,CAAG,CAAC,CAAGQ,QAAQ,CAACE,IAAI,CAACQ,QAAQ,CAAC,CAAC,CAAC,CAAG,QAAQ,CACtFX,QAAQ,CAAClB,UAAU,CAAC,QAAQ,CAAE,CAC1B8B,MAAM,CAAEF,OACZ,CAAC,CAAC,CAAC,CACP,CACJ,CAAC,CAED,MAAO,MAAM,CAAAG,SAAS,CAAGA,CAAA,GAAM,KAAO,CAAAb,QAAQ,EAAK,CAC/C,GAAI,CAAAC,QAAQ,CAAG,KAAM,CAAAlB,OAAO,CAAC+B,OAAO,CAAC,CAAC,CACtC,GAAIb,QAAQ,CAACE,IAAI,CAACC,UAAU,GAAK,CAAC,CAAE,CAChCJ,QAAQ,CAACF,eAAe,CAAC,IAAI,CAAE,IAAI,CAAE,IAAI,CAAE,KAAK,CAAC,CAAC,CACtD,CACJ,CAAC,CAED,cAAe,CAAAR,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}